!function(){"use strict";const t=t=>({name:"NoRouteFoundForDefaultPath",message:`No route found for the defaultPath: '${t}'`});class e{constructor(n,s,r){this.location=n,this.routes=r;const{matches:a}=e.traverse(s,r);if(0===a.length)throw t(s);this.currentPath=s}startTracking(t){t.addEventListener("hashchange",({newURL:t})=>{const e=new URL(t).hash.slice(1);e!==this.currentPath&&this.moveTo(e)})}static traverse(t,n,s=[],r=""){let a=null;if(n.find(e=>{const n=e.match(t);return null!==n&&(a={route:e,result:n},!0)}),null===a)return{path:r,matches:s};const{result:{path:o},route:{children:i}}=a;if(i.length>0){const n=t.substring(o.length);return e.traverse(n,i,[...s,a],r+o)}return{path:r+o,matches:[...s,a]}}moveTo(t){const{path:n,matches:s}=e.traverse(t,this.routes);return this.location.hash=`#${n}`,s.forEach(({route:t,result:{params:e}})=>{t.handler({path:n,params:e})}),n}}class n{constructor(t,e,n=[]){this.paramNames=[];const s=t.split("/").map(t=>t.startsWith(":")?(this.paramNames.push(t.slice(1)),"([^/]+)"):t).join("/");this.pathRegex=new RegExp(`^${s}`),this.handler=e,this.children=n}match(t){const e=this.pathRegex.exec(t);if(null===e)return null;const[n,...s]=e,r=t.charAt(n.length);if(""!==r&&"/"!==r)return null;const a={};return this.paramNames.forEach((t,e)=>{a[t]=s[e]}),{path:n,params:a}}}const s={};var r=(t,e,n)=>{if(!/[a-z][a-z0-9_.-]*-[a-z0-9_.-]*/.test(t))throw(t=>({name:"InvalidViewName",message:`Invalid view name: '${t}'`}))(t);return customElements.define(t,class extends HTMLElement{constructor(){super();const r=this.getAttribute("id")||"";void 0===s[t]&&(s[t]={}),s[t][r]={element:this,fun:n};const{html:a,eventListeners:o}=n(...e);this.innerHTML=a,Object.entries(o).forEach(([t,e])=>{Object.assign(this.querySelector(t),e)})}}),t};const a=(t,e="")=>(...n)=>{if(void 0===s[t])return;const{element:r,fun:a}=s[t][e],{html:o,eventListeners:i}=a(...n);r.innerHTML=o,Object.entries(i).forEach(([t,e])=>{Object.assign(r.querySelector(t),e)})};var o=r("deadend-navbar",[""],t=>({html:`\n  <nav>${t}</nav>\n  `,eventListeners:{nav:{onclick:()=>a("deadend-navbar")("clicked")}}})),i=r("deadend-root",[],()=>({html:`\n    <${o}></${o}>\n  `,eventListeners:{}})),h={navbar:o,root:i};const{root:c,navbar:l}=h,u=new e(window.location,"",[new n("",({path:t})=>a(l)(t),[new n("/foo",()=>{}),new n("/bar/:barName",()=>{})])]);document.getElementById("root").innerHTML=`<${c}></${c}>`,u.moveTo("/bar/baz"),u.startTracking(window)}();
