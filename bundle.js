!function(){"use strict";const t=t=>({name:"NoRouteFoundForDefaultPath",message:`No route found for the defaultPath: '${t}'`});class e{constructor(n,a,r){this.location=n,this.routes=r;const{matches:s}=e.traverse(a,r);if(0===s.length)throw t(a);this.currentPath=a}startTracking(t){t.addEventListener("hashchange",({newURL:t})=>{const e=new URL(t).hash.slice(1);e!==this.currentPath&&this.moveTo(e)})}static traverse(t,n,a=[],r=""){let s=null;if(n.find(e=>{const n=e.match(t);return null!==n&&(s={route:e,result:n},!0)}),null===s)return{path:r,matches:a};const{result:{path:o},route:{children:c}}=s;if(c.length>0){const n=t.substring(o.length);return e.traverse(n,c,[...a,s],r+o)}return{path:r+o,matches:[...a,s]}}moveTo(t){const{path:n,matches:a}=e.traverse(t,this.routes);return this.location.hash=`#${n}`,a.forEach(({route:t,result:{params:e}})=>{t.handler({path:n,params:e})}),n}}class n{constructor(t,e,n=[]){this.paramNames=[];const a=t.split("/").map(t=>t.startsWith(":")?(this.paramNames.push(t.slice(1)),"([^/]+)"):t).join("/");this.pathRegex=new RegExp(`^${a}`),this.handler=e,this.children=n}match(t){const e=this.pathRegex.exec(t);if(null===e)return null;const[n,...a]=e,r=t.charAt(n.length);if(""!==r&&"/"!==r)return null;const s={};return this.paramNames.forEach((t,e)=>{s[t]=a[e]}),{path:n,params:s}}}const a={};var r=(t,e,n)=>{if(!/[a-z][a-z0-9_.-]*-[a-z0-9_.-]*/.test(t))throw(t=>({name:"InvalidViewName",message:`Invalid view name: '${t}'`}))(t);return customElements.define(t,class extends HTMLElement{constructor(){super();const r=this.getAttribute("id")||"";void 0===a[t]&&(a[t]={}),a[t][r]={element:this,fun:n};const{html:s,attachments:o}=n(...e);this.innerHTML=s,Object.entries(o).forEach(([t,e])=>{Object.assign(this.querySelector(t),e)})}}),t};const s=(t,e="")=>(...n)=>{if(void 0===a[t])return;const{element:r,fun:s}=a[t][e],{html:o,attachments:c}=s(...n);r.innerHTML=o,Object.entries(c).forEach(([t,e])=>{Object.assign(r.querySelector(t),e)})};var o=r("deadend-navbar",[""],t=>({html:`\n  <nav>${t}</nav>\n  `,attachments:{nav:{onclick:()=>s("deadend-navbar")("clicked"),style:"\n        position:fixed;\n        top:0px;\n        left:0px;\n        width:100%;\n        height:55px;\n        background:linear-gradient(to bottom, #cccccc 80%, #333333);\n      "}}})),c=r("deadend-root",[],()=>({html:`\n    <${o}></${o}>\n  `,attachments:{}})),h={navbar:o,root:c};const{root:i,navbar:l}=h,u=new e(window.location,"",[new n("",({path:t})=>s(l)(t),[new n("/foo",()=>{}),new n("/bar/:barName",()=>{})])]);document.getElementById("root").innerHTML=`<${i}></${i}>`,u.moveTo("/bar/baz"),u.startTracking(window)}();
