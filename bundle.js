!function(){"use strict";const t=t=>({name:"NoRouteFoundForDefaultPath",message:`No route found for the defaultPath: '${t}'`});class e{constructor(n,r,s){this.location=n,this.routes=s;const{matches:a}=e.traverse(r,s);if(0===a.length)throw t(r);this.currentPath=r}startTracking(t){t.addEventListener("hashchange",({newURL:t})=>{const e=new URL(t).hash.slice(1);e!==this.currentPath&&this.moveTo(e)})}static traverse(t,n,r=[],s=""){let a=null;if(n.find(e=>{const n=e.match(t);return null!==n&&(a={route:e,result:n},!0)}),null===a)return{path:s,matches:r};const{result:{path:o},route:{children:h}}=a;if(h.length>0){const n=t.substring(o.length);return e.traverse(n,h,[...r,a],s+o)}return{path:s+o,matches:[...r,a]}}moveTo(t){const{path:n,matches:r}=e.traverse(t,this.routes);return this.location.hash=`#${n}`,r.forEach(({route:t,result:{params:e}})=>{t.handler({path:n,params:e})}),n}}class n{constructor(t,e,n=[]){this.paramNames=[];const r=t.split("/").map(t=>t.startsWith(":")?(this.paramNames.push(t.slice(1)),"([^/]+)"):t).join("/");this.pathRegex=new RegExp(`^${r}`),this.handler=e,this.children=n}match(t){const e=this.pathRegex.exec(t);if(null===e)return null;const[n,...r]=e,s=t.charAt(n.length);if(""!==s&&"/"!==s)return null;const a={};return this.paramNames.forEach((t,e)=>{a[t]=r[e]}),{path:n,params:a}}}const r={};var s=(t,e,n)=>(customElements.define(t,class extends HTMLElement{constructor(){super();const s=this.getAttribute("id")||"";void 0===r[t]&&(r[t]={}),r[t][s]={element:this,fun:n},this.innerHTML=n(...e)}}),t);var a=s("deadend-navbar",[""],t=>`\n  <nav>${t}</nav>\n`),o=s("deadend-root",[],()=>`\n  <${a}></${a}>\n`),h={navbar:a,root:o};const{root:c,navbar:i}=h,u=new e(window.location,"",[new n("",({path:t})=>((t,e="")=>(...n)=>{if(void 0===r[t])return;const{element:s,fun:a}=r[t][e];s.innerHTML=a(...n)})(i)(t),[new n("/foo",()=>{}),new n("/bar/:barName",()=>{})])]);document.getElementById("root").innerHTML=`<${c}></${c}>`,u.moveTo("/bar/baz"),u.startTracking(window)}();
